<div class="header">
  <h2 class="title">Flight Search</h2>
</div>

<p>Counter: {{ counter }}</p>

<app-flight-search-form [(searchParams)]="searchParams" (search)="search()"/>

<p>Aktuelle Suche: {{ searchParams.from }} - {{ searchParams.to }}</p>

@for (flight of flights; track flight) {
  <app-flight-card [item]="flight" [selected]="basket.get(flight.id) || false"
                   (selectedChange)="basket.set(flight.id, $event)" (edit)="this.select($event)"
  >
    <h2 class="header">Von {{ flight.from }} nach {{ flight.to }}</h2>
    <h3 class="footer">Bitte bestellen</h3>
  </app-flight-card>
}


@if (selectedFlight) {
  <div>
    @if (message) {
      <div class="alert alert-primary">
        {{ message }}
      </div>
    }
    <form [formGroup]="formGroup">
      <div class="form-group">
        <label>Id</label>
        <input formControlName="id" class="form-control"/>
      </div>
      <div class="form-group">
        <label>From</label>
        <input formControlName="from" class="form-control"/>
        @if (formGroup.controls["from"]?.hasError('required')) {
          <p>Feld ist Pflichtfeld.</p>
        }
      </div>
      <div class="form-group">
        <label>To</label>
        <input formControlName="to" class="form-control"/>
      </div>
      <div class="form-group">
        <label>Date</label>
        <input formControlName="date" class="form-control"/>
      </div>
      <div class="form-group">
        <input formControlName="delayed" type="checkbox" id="delayed"/>
        <label for="delayed">Delayed</label>
      </div>
      <button [disabled]="formGroup.invalid" class="btn btn-default" (click)="save()">Save</button>
    </form>
  </div>
}

<p>&nbsp;</p>

@if (selectedFlight) {
  <div>
    <pre>{{ selectedFlight | json }}</pre>
  </div>
}
